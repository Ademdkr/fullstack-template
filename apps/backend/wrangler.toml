name = "fullstack-template-backend"
main = "dist/main.js"
compatibility_date = "2025-10-25"
compatibility_flags = ["nodejs_compat"]

[build]
command = "pnpm install && pnpm build && pnpm prisma generate"

[env.production]
name = "fullstack-template-backend-prod"
vars = { ENVIRONMENT = "production" }

[env.production.vars]
# Diese Variablen werden zur Laufzeit aus den Cloudflare Secrets gelesen
DATABASE_URL = ""

[env.staging]
name = "fullstack-template-backend-staging"
vars = { ENVIRONMENT = "staging" }

[env.staging.vars]
# Diese Variablen werden zur Laufzeit aus den Cloudflare Secrets gelesen
DATABASE_URL = ""

[[rules]]
type = "ESModule"
globs = ["**/*.js"]
fallthrough = true